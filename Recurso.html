<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Sistema de Evaluaci√≥n Microcurricular</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: linear-gradient(135deg, #a8d8f0 0%, #c8e6f5 100%);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            min-height: 100vh;
            padding: 20px;
            position: relative;
        }

        .main-container {
            background: #ffffff;
            max-width: 1400px;
            margin: 0 auto;
            border-radius: 24px;
            box-shadow: 0 20px 60px rgba(25, 118, 210, 0.2);
            overflow: hidden;
            animation: fadeInUp 1s ease-out;
            display: grid;
            grid-template-columns: 1fr 80px;
            min-height: 80vh;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .content-area {
            display: flex;
            flex-direction: column;
        }

        .header {
            background: linear-gradient(135deg, #0d47a1 0%, #1976d2 100%);
            padding: 60px 50px;
            color: white;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: rotate 20s linear infinite;
        }

        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .header-content {
            position: relative;
            z-index: 2;
        }

        .header-title {
            font-size: 3rem;
            font-weight: 800;
            margin-bottom: 12px;
            text-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .header-subtitle {
            font-size: 1.3rem;
            opacity: 0.95;
            font-weight: 300;
            letter-spacing: 1px;
        }

        .navigation-sidebar {
            background: linear-gradient(180deg, #0a2e5c 0%, #0d47a1 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 30px 0;
            gap: 20px;
        }

        .nav-icon {
            width: 50px;
            height: 50px;
            border-radius: 16px;
            background: rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .nav-icon:hover {
            background: rgba(255, 255, 255, 0.25);
            transform: translateX(-8px) scale(1.1);
            box-shadow: -8px 8px 32px rgba(0, 0, 0, 0.3);
        }

        .nav-icon.active {
            background: #1976d2;
            transform: translateX(-12px) scale(1.15);
            box-shadow: -12px 12px 40px rgba(25, 118, 210, 0.4);
        }

        .nav-icon svg {
            width: 24px;
            height: 24px;
            fill: white;
        }

        .nav-tooltip {
            position: absolute;
            right: 70px;
            background: #333;
            color: white;
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 12px;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: all 0.3s ease;
            transform: translateX(10px);
        }

        .nav-icon:hover .nav-tooltip {
            opacity: 1;
            transform: translateX(0);
        }

        .form-section {
            padding: 50px;
            min-height: 500px;
            animation: slideIn 0.6s ease;
            background: linear-gradient(45deg, #e3f2fd 0%, #e8f4fd 100%);
            margin: 0;
            flex: 1;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .section-title {
            font-size: 2.2rem;
            font-weight: 700;
            color: #0d47a1;
            margin-bottom: 32px;
            position: relative;
            padding-bottom: 16px;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 80px;
            height: 4px;
            background: linear-gradient(90deg, #1976d2, #42a5f5);
            border-radius: 2px;
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 28px;
            margin-bottom: 28px;
        }

        .form-group {
            position: relative;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #0d47a1;
            font-size: 0.95rem;
        }

        input, select, textarea {
            width: 100%;
            padding: 16px 20px;
            border: 2px solid #bbdefb;
            border-radius: 16px;
            font-size: 1rem;
            background: #ffffff;
            transition: all 0.4s ease;
            outline: none;
            font-family: inherit;
        }

        input:focus, select:focus, textarea:focus {
            border-color: #1976d2;
            background: #e3f2fd;
            box-shadow: 0 0 0 4px rgba(25, 118, 210, 0.1);
            transform: translateY(-2px);
        }

        .btn-primary {
            background: linear-gradient(135deg, #1976d2 0%, #42a5f5 100%);
            color: white;
            border: none;
            padding: 18px 36px;
            border-radius: 16px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.4s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 8px 24px rgba(25, 118, 210, 0.3);
            position: relative;
            overflow: hidden;
        }

        .btn-primary::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            transition: left 0.5s;
        }

        .btn-primary:hover::before {
            left: 100%;
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 32px rgba(25, 118, 210, 0.4);
        }

        .btn-primary:active {
            transform: translateY(-1px);
        }

        .info-card {
            background: linear-gradient(135deg, #ffffff 0%, #e3f2fd 100%);
            padding: 24px;
            border-radius: 20px;
            margin-bottom: 32px;
            border: 2px solid #bbdefb;
            box-shadow: 0 8px 24px rgba(25, 118, 210, 0.1);
        }

        .calificaciones-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 12px 40px rgba(25, 118, 210, 0.15);
            margin-bottom: 32px;
            margin-top: 24px;
        }

        .calificaciones-table th {
            background: linear-gradient(135deg, #0d47a1 0%, #1976d2 100%);
            color: white;
            padding: 16px 12px;
            font-weight: 600;
            text-align: center;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .calificaciones-table td {
            padding: 16px 12px;
            border-bottom: 1px solid #e3f2fd;
            text-align: center;
            transition: all 0.3s ease;
        }

        .calificaciones-table tr:hover {
            background: linear-gradient(90deg, #e3f2fd, #bbdefb);
            transform: scale(1.01);
        }

        .calificaciones-table input {
            border: 1px solid #bbdefb;
            padding: 8px 12px;
            border-radius: 8px;
            text-align: center;
            width: 80px;
        }

        .add-student-btn {
            margin-bottom: 24px;
            background: linear-gradient(135deg, #42a5f5 0%, #64b5f6 100%);
        }

        .button-row {
            text-align: center;
            margin-top: 32px;
        }

        .saved-indicator {
            position: fixed;
            top: 30px;
            right: 30px;
            background: linear-gradient(135deg, #1976d2, #42a5f5);
            color: white;
            padding: 16px 24px;
            border-radius: 16px;
            font-weight: 600;
            box-shadow: 0 8px 32px rgba(25, 118, 210, 0.4);
            transform: translateX(400px);
            opacity: 0;
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 1000;
        }

        .saved-indicator.show {
            transform: translateX(0);
            opacity: 1;
        }

        .print-btn {
            background: linear-gradient(135deg, #4caf50 0%, #66bb6a 100%);
            margin-left: 16px;
        }

        .trimestre-tabs {
            display: flex;
            margin-bottom: 24px;
            border-bottom: 2px solid #bbdefb;
            overflow-x: auto;
            white-space: nowrap;
        }

        .trimestre-tab {
            padding: 12px 24px;
            cursor: pointer;
            font-weight: 600;
            color: #0d47a1;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
        }

        .trimestre-tab.active {
            color: #1976d2;
            border-bottom-color: #1976d2;
            background: rgba(25, 118, 210, 0.1);
        }

        .trimestre-content {
            display: none;
            overflow-x: auto;
        }

        .trimestre-content.active {
            display: block;
        }

        @media (max-width: 768px) {
            .main-container {
                grid-template-columns: 1fr;
                grid-template-rows: auto 1fr;
            }

            .navigation-sidebar {
                flex-direction: row;
                padding: 20px;
                gap: 15px;
                justify-content: center;
            }

            .nav-icon {
                width: 45px;
                height: 45px;
            }

            .nav-tooltip {
                display: none;
            }

            .header {
                padding: 40px 30px;
            }

            .header-title {
                font-size: 2.2rem;
            }

            .form-section {
                padding: 30px 25px;
            }

            .form-row {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .calificaciones-table th,
            .calificaciones-table td {
                padding: 12px 8px;
                font-size: 0.85rem;
            }

            .trimestre-tabs {
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>
    <div class="main-container">
        <div class="content-area">
            <div class="header">
                <div class="header-content">
                    <div class="header-title">Evaluaci√≥n Microcurricular</div>
                    <div class="header-subtitle">Registro de Calificaciones Docente</div>
                </div>
            </div>

            <!-- Datos Informativos I.E -->
            <div class="form-section" id="section1">
                <div class="section-title">Datos informativos de la Instituci√≥n Educativa</div>
                <form id="datosIEForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="nombre">Nombre de la Instituci√≥n:</label>
                            <input type="text" id="nombre" placeholder="Ingrese el nombre completo">
                        </div>
                        <div class="form-group">
                            <label for="codigoAmie">C√≥digo AMIE:</label>
                            <input type="text" id="codigoAmie" placeholder="000000000">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="sostenimiento">Tipo de Sostenimiento:</label>
                            <select id="sostenimiento">
                                <option value="">Seleccione una opci√≥n...</option>
                                <option value="Fiscal">Fiscal</option>
                                <option value="Particular">Particular</option>
                                <option value="Fiscomisional">Fiscomisional</option>
                                <option value="Municipal">Municipal</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="regimen">R√©gimen Acad√©mico:</label>
                            <select id="regimen">
                                <option value="">Seleccione una opci√≥n...</option>
                                <option value="Costa">Costa-Gal√°pagos</option>
                                <option value="Sierra">Sierra-Amazon√≠a</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="provincia">Provincia:</label>
                            <select id="provincia">
                                <option value="">Seleccione la provincia...</option>
                                <option value="Azuay">Azuay</option>
                                <option value="Bol√≠var">Bol√≠var</option>
                                <option value="Ca√±ar">Ca√±ar</option>
                                <option value="Carchi">Carchi</option>
                                <option value="Chimborazo">Chimborazo</option>
                                <option value="Cotopaxi">Cotopaxi</option>
                                <option value="El Oro">El Oro</option>
                                <option value="Esmeraldas">Esmeraldas</option>
                                <option value="Gal√°pagos">Gal√°pagos</option>
                                <option value="Guayas">Guayas</option>
                                <option value="Imbabura">Imbabura</option>
                                <option value="Loja">Loja</option>
                                <option value="Los R√≠os">Los R√≠os</option>
                                <option value="Manab√≠">Manab√≠</option>
                                <option value="Morona Santiago">Morona Santiago</option>
                                <option value="Napo">Napo</option>
                                <option value="Orellana">Orellana</option>
                                <option value="Pastaza">Pastaza</option>
                                <option value="Pichincha">Pichincha</option>
                                <option value="Santa Elena">Santa Elena</option>
                                <option value="Santo Domingo">Santo Domingo</option>
                                <option value="Sucumb√≠os">Sucumb√≠os</option>
                                <option value="Tungurahua">Tungurahua</option>
                                <option value="Zamora Chinchipe">Zamora Chinchipe</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="canton">Cant√≥n:</label>
                            <input type="text" id="canton" placeholder="Nombre del cant√≥n">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="parroquia">Parroquia:</label>
                            <input type="text" id="parroquia" placeholder="Nombre de la parroquia">
                        </div>
                        <div class="form-group">
                            <label for="calles">Direcci√≥n (Calles):</label>
                            <input type="text" id="calles" placeholder="Calles principales y secundarias">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="secciones">Secciones Disponibles:</label>
                            <select id="secciones">
                                <option value="">Seleccione la seccion...</option>
                                <option value="Matutina">Matutina</option>
                                <option value="Vespertina">Vespertina</option>
                                <option value="Nocturna">Nocturna</option>
                                <option value="Intensiva">Intensiva</option>
                            </select>
                        </div>
                        <div class="form-row">
                        <div class="form-group">
                            <label for="nivelesEducativos">Niveles Educativos:</label>
                            <select id="nivelesEducativos">
                                <option value="">Seleccione el nivel...</option>
                                <option value="Inicial">Inicial</option>
                                <option value="EGB">Educaci√≥n General B√°sica</option>
                                <option value="BGU">Bachillerato General Unificado</option>
                                <option value="Bachillerato T√©cnico">Bachillerato T√©cnico</option>
                            </select>
                        </div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="correoIE">Correo Institucional:</label>
                            <input type="email" id="correoIE" placeholder="institucion@educacion.gob.ec">
                        </div>
                        <div class="form-group">
                            <label for="telefonoIE">Tel√©fono de Contacto:</label>
                            <input type="tel" id="telefonoIE" placeholder="00-000-0000">
                        </div>
                    </div>
                    <div class="button-row">
                        <button type="button" class="btn-primary" onclick="guardarDatos(); showTab(2)">Guardar y Continuar ‚Üí</button>
                    </div>
                </form>
            </div>

            <!-- Datos del Directivo -->
            <div class="form-section" id="section2" style="display:none;">
                <div class="section-title">Datos del Directivo</div>
                <form id="datosDirectivoForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="nombresDirectivo">Nombres y Apellidos Completos:</label>
                            <input type="text" id="nombresDirectivo" placeholder="Nombres y apellidos del directivo">
                        </div>
                        <div class="form-group">
                            <label for="cargoDirectivo">Cargo Directivo:</label>
                            <select id="cargoDirectivo">
                                <option value="">Seleccione el cargo...</option>
                                <option value="Rector">Rector/a</option>
                                <option value="Director">Director/a</option>
                                <option value="Vicerrector">Vicerrector/a</option>
                                <option value="Subdirector">Subdirector/a</option>
                                <option value="Inspector General">Inspector/a General</option>
                                <option value="Coordinador">Coordinador/a</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="aniosServicio">A√±os de Servicio:</label>
                            <input type="number" id="aniosServicio" placeholder="0" min="0" max="50">
                        </div>
                        <div class="form-group">
                            <label for="celularDirectivo">N√∫mero de Celular:</label>
                            <input type="tel" id="celularDirectivo" placeholder="0900-000-000">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="correoDirectivo">Correo Electr√≥nico:</label>
                            <input type="email" id="correoDirectivo" placeholder="usuario@email.com">
                        </div>
                    </div>
                    <div class="button-row">
                        <button type="button" class="btn-primary" onclick="guardarDatos(); showTab(3)">Guardar y continuar</button>
                    </div>
                </form>
            </div>

            <!-- Datos del Docente -->
            <div class="form-section" id="section3" style="display:none;">
                <div class="section-title">Datos del Docente</div>
                <form id="datosDocenteForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="nombresDocente">Nombres y Apellidos Completos:</label>
                            <input type="text" id="nombresDocente" placeholder="Ingrese nombres y apellidos">
                        </div>
                        <div class="form-group">
                            <label for="experiencia">A√±os de Experiencia Docente:</label>
                            <input type="number" id="experiencia" placeholder="0" min="0" max="50">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="asignatura">Asignatura Principal:</label>
                            <select id="asignatura">
                                <option value="">Seleccione la asignatura...</option>
                                <option value="Lengua y Literatura">Lengua y Literatura</option>
                                <option value="Matem√°ticas">Matem√°ticas</option>
                                <option value="Estudios Sociales">Estudios Sociales</option>
                                <option value="Ciencias Naturales">Ciencias Naturales</option>
                                <option value="Educaci√≥n Cultural y Art√≠stica">Educaci√≥n Cultural y Art√≠stica</option>
                                <option value="Educaci√≥n F√≠sica">Educaci√≥n F√≠sica</option>
                                <option value="Lengua Extranjera">Lengua Extranjera</option>
                                <option value="F√≠sica">F√≠sica</option>
                                <option value="Qu√≠mica">Qu√≠mica</option>
                                <option value="Biolog√≠a">Biolog√≠a</option>
                                <option value="Historia">Historia</option>
                                <option value="Filosof√≠a">Filosof√≠a</option>
                                <option value="Emprendimiento y Gesti√≥n">Emprendimiento y Gesti√≥n</option>
                                <option value="Inform√°tica">Inform√°tica</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="cargoDocente">Cargo o Funci√≥n:</label>
                            <select id="cargoDocente">
                                <option value="">Seleccione el cargo...</option>
                                <option value="Docente">Docente</option>
                                <option value="Tutor">Tutor/a</option>
                                <option value="Coordinador">Coordinador/a</option>
                                <option value="Inspector">Inspector/a</option>
                                <option value="Docente Gu√≠a">Docente Gu√≠a</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="grado">Grado o Curso:</label>
                            <select id="grado">
                                <option value="">Seleccione el grado/curso...</option>
                                <option value="1¬∞ EGB">1¬∞ EGB</option>
                                <option value="2¬∞ EGB">2¬∞ EGB</option>
                                <option value="3¬∞ EGB">3¬∞ EGB</option>
                                <option value="4¬∞ EGB">4¬∞ EGB</option>
                                <option value="5¬∞ EGB">5¬∞ EGB</option>
                                <option value="6¬∞ EGB">6¬∞ EGB</option>
                                <option value="7¬∞ EGB">7¬∞ EGB</option>
                                <option value="8¬∞ EGB">8¬∞ EGB</option>
                                <option value="9¬∞ EGB">9¬∞ EGB</option>
                                <option value="10¬∞ EGB">10¬∞ EGB</option>
                                <option value="1¬∞ BGU">1¬∞ BGU</option>
                                <option value="2¬∞ BGU">2¬∞ BGU</option>
                                <option value="3¬∞ BGU">3¬∞ BGU</option>
                            </select>
                        </div>
                        <div class="form-row">
                        <div class="form-group">
                            <label for="paralelos">Paralelos a Cargo:</label>
                            <select id="paralelos">
                                <option value="">Seleccione el cargo...</option>
                                <option value="A">A</option>
                                <option value="B">B</option>
                                <option value="C">C</option>
                                <option value="D">D</option>
                                <option value="E">E</option>
                                <option value="F">F</option>
                            </select>
                        </div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="celularDocente">Celular Personal:</label>
                            <input type="tel" id="celularDocente" placeholder="0900-000-000">
                        </div>
                        <div class="form-group">
                            <label for="emailDocente">Email Personal:</label>
                            <input type="email" id="emailDocente" placeholder="usuario@email.com">
                        </div>
                    </div>
                    <div class="button-row">
                        <button type="button" class="btn-primary" onclick="guardarDatos(); showTab(4)">Continuar ‚Üí</button>
                    </div>
                </form>
            </div>

            <!-- Calificaciones -->
            <div class="form-section" id="section4" style="display:none;">
                <div class="section-title">Registro de Calificaciones</div>
                
                <div class="info-card">
                    <div class="form-row">
                        <div class="form-group">
                            <label>Instituci√≥n Educativa:</label>
                            <span id="institucionInfo" style="font-weight: 600; color: #0d47a1;">-</span>
                        </div>
                        <div class="form-group">
                            <label>Docente Responsable:</label>
                            <span id="docenteInfo" style="font-weight: 600; color: #0d47a1;">-</span>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Asignatura:</label>
                            <span id="asignaturaInfo" style="font-weight: 600; color: #0d47a1;">-</span>
                        </div>
                        <div class="form-group">
                            <label>Grado/Curso:</label>
                            <span id="gradoInfo" style="font-weight: 600; color: #0d47a1;">-</span>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Paralelos:</label>
                            <span id="paralelosInfo" style="font-weight: 600; color: #0d47a1;">-</span>
                        </div>
                        <div class="form-group">
                            <label>A√±o Lectivo:</label>
                            <span id="anioLectivoInfo" style="font-weight: 600; color: #0d47a1;">-</span>
                        </div>
                    </div>
                </div>

                <div class="trimestre-tabs">
                    <div class="trimestre-tab active" onclick="mostrarTrimestre(1)">Primer Trimestre</div>
                    <div class="trimestre-tab" onclick="mostrarTrimestre(2)">Segundo Trimestre</div>
                    <div class="trimestre-tab" onclick="mostrarTrimestre(3)">Tercer Trimestre</div>
                    <div class="trimestre-tab" onclick="mostrarTrimestre(4)">Promoci√≥n Final</div>
                </div>

                <!-- Primer Trimestre -->
                <div class="trimestre-content active" id="trimestre1">
                    <button class="add-student-btn btn-primary" onclick="agregarEstudiante(1)">‚ûï Agregar Nuevo Estudiante</button>
                    
                    <table class="calificaciones-table" id="tablaEstudiantes1">
                        <thead>
                            <tr>
                                <th>Estudiante</th>
                                <th>Trabajo en Clase (20%)</th>
                                <th>Lecciones (15%)</th>
                                <th>Exposiciones (15%)</th>
                                <th>Eva. Formativa (20%)</th>
                                <th>Eva. Sumativa (30%)</th>
                                <th>Promedio 70%</th>
                                <th>Eva. Trimestral 30%</th>
                                <th>Promedio Final</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>
                </div>

                <!-- Segundo Trimestre -->
                <div class="trimestre-content" id="trimestre2">
                    <button class="add-student-btn btn-primary" onclick="agregarEstudiante(2)">‚ûï Agregar Nuevo Estudiante</button>
                    
                    <table class="calificaciones-table" id="tablaEstudiantes2">
                        <thead>
                            <tr>
                                <th>Estudiante</th>
                                <th>Trabajo en Clase (20%)</th>
                                <th>Lecciones (15%)</th>
                                <th>Exposiciones (15%)</th>
                                <th>Eva. Formativa (20%)</th>
                                <th>Eva. Sumativa (30%)</th>
                                <th>Promedio 70%</th>
                                <th>Eva. Trimestral 30%</th>
                                <th>Promedio Final</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>
                </div>

                <!-- Tercer Trimestre -->
                <div class="trimestre-content" id="trimestre3">
                    <button class="add-student-btn btn-primary" onclick="agregarEstudiante(3)">‚ûï Agregar Nuevo Estudiante</button>
                    
                    <table class="calificaciones-table" id="tablaEstudiantes3">
                        <thead>
                            <tr>
                                <th>Estudiante</th>
                                <th>Trabajo en Clase (20%)</th>
                                <th>Lecciones (15%)</th>
                                <th>Exposiciones (15%)</th>
                                <th>Eva. Formativa (20%)</th>
                                <th>Eva. Sumativa (30%)</th>
                                <th>Promedio 70%</th>
                                <th>Eva. Trimestral 30%</th>
                                <th>Promedio Final</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>
                </div>

                <!-- Promoci√≥n Final -->
                <div class="trimestre-content" id="trimestre4">
                    <table class="calificaciones-table" id="tablaPromocion">
                        <thead>
                            <tr>
                                <th>Estudiante</th>
                                <th>1er Trimestre</th>
                                <th>2do Trimestre</th>
                                <th>3er Trimestre</th>
                                <th>Promedio Final</th>
                                <th>Estado</th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>
                </div>

                <div class="button-row">
                    <button type="button" class="btn-primary" onclick="guardarDatos()">Guardar calificaciones</button>
                    <button type="button" class="btn-primary print-btn" onclick="imprimirCalificaciones()">üñ®Ô∏è Imprimir Calificaciones</button>
                </div>
            </div>
        </div>

        <div class="navigation-sidebar">
            <div class="nav-icon active" id="nav1" onclick="showTab(1)">
                <svg viewBox="0 0 24 24">
                    <path d="M12 3L1 9l11 6 9-4.91V17h2V9zm7.74 7.77L12 18l-9-5V8l9 4.23 7.74-4.23z"/>
                </svg>
                <div class="nav-tooltip">Instituci√≥n Educativa</div>
            </div>
            <div class="nav-icon" id="nav2" onclick="showTab(2)">
                <svg viewBox="0 0 24 24">
                    <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                </svg>
                <div class="nav-tooltip">Datos del Directivo</div>
            </div>
            <div class="nav-icon" id="nav3" onclick="showTab(3)">
                <svg viewBox="0 0 24 24">
                    <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                </svg>
                <div class="nav-tooltip">Datos del Docente</div>
            </div>
            <div class="nav-icon" id="nav4" onclick="showTab(4)">
                <svg viewBox="0 0 24 24">
                    <path d="M19 3H5c-1.1 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/>
                </svg>
                <div class="nav-tooltip">Calificaciones</div>
            </div>
        </div>
    </div>

    <div class="saved-indicator" id="savedIndicator">‚úÖ Datos guardados correctamente</div>

    <script>
        // Variables globales para almacenar datos
        let datosGuardados = {
            ie: {},
            directivo: {},
            docente: {},
            calificaciones: {
                trimestre1: [],
                trimestre2: [],
                trimestre3: []
            }
        };

        // Funci√≥n para mostrar pesta√±as
        function showTab(n) {
            // Ocultar todas las secciones
            for (let i = 1; i <= 4; i++) {
                const section = document.getElementById('section' + i);
                const nav = document.getElementById('nav' + i);
                if (section && nav) {
                    section.style.display = (i === n) ? '' : 'none';
                    nav.classList.toggle('active', i === n);
                }
            }
            // Actualizar informaci√≥n del docente si es la secci√≥n de calificaciones
            if (n === 4) {
                actualizarInfoDocente();
                calcularPromocionFinal();
            }
        }

        // Funci√≥n para mostrar trimestre espec√≠fico
        function mostrarTrimestre(n) {
            // Actualizar pesta√±as activas
            const tabs = document.querySelectorAll('.trimestre-tab');
            tabs.forEach((tab, index) => {
                tab.classList.toggle('active', index === n-1);
            });
            
            // Mostrar contenido del trimestre seleccionado
            const contents = document.querySelectorAll('.trimestre-content');
            contents.forEach((content, index) => {
                content.classList.toggle('active', index === n-1);
            });
        }

        // Funci√≥n para guardar datos
        function guardarDatos() {
            // Guardar datos de la IE
            datosGuardados.ie = {
                nombre: document.getElementById('nombre')?.value || '',
                codigoAmie: document.getElementById('codigoAmie')?.value || '',
                sostenimiento: document.getElementById('sostenimiento')?.value || '',
                regimen: document.getElementById('regimen')?.value || '',
                provincia: document.getElementById('provincia')?.value || '',
                canton: document.getElementById('canton')?.value || '',
                parroquia: document.getElementById('parroquia')?.value || '',
                calles: document.getElementById('calles')?.value || '',
                secciones: Array.from(document.getElementById('secciones').selectedOptions).map(opt => opt.value).join(', '),
                nivelesEducativos: Array.from(document.getElementById('nivelesEducativos').selectedOptions).map(opt => opt.value).join(', '),
                correoIE: document.getElementById('correoIE')?.value || '',
                telefonoIE: document.getElementById('telefonoIE')?.value || ''
            };

            // Guardar datos del directivo
            datosGuardados.directivo = {
                nombresDirectivo: document.getElementById('nombresDirectivo')?.value || '',
                cargoDirectivo: document.getElementById('cargoDirectivo')?.value || '',
                aniosServicio: document.getElementById('aniosServicio')?.value || '',
                celularDirectivo: document.getElementById('celularDirectivo')?.value || '',
                correoDirectivo: document.getElementById('correoDirectivo')?.value || ''
            };

            // Guardar datos del docente
            datosGuardados.docente = {
                nombresDocente: document.getElementById('nombresDocente')?.value || '',
                experiencia: document.getElementById('experiencia')?.value || '',
                asignatura: document.getElementById('asignatura')?.value || '',
                cargoDocente: document.getElementById('cargoDocente')?.value || '',
                grado: document.getElementById('grado')?.value || '',
                paralelos: Array.from(document.getElementById('paralelos').selectedOptions).map(opt => opt.value).join(', '),
                celularDocente: document.getElementById('celularDocente')?.value || '',
                emailDocente: document.getElementById('emailDocente')?.value || ''
            };

            // Guardar datos de estudiantes con sus notas y promedios para cada trimestre
            for (let i = 1; i <= 3; i++) {
                const filas = document.querySelectorAll(`#tablaEstudiantes${i} tbody tr`);
                datosGuardados.calificaciones[`trimestre${i}`] = [];

                filas.forEach(fila => {
                    const inputs = fila.querySelectorAll("input");
                    if (inputs.length < 9) return; // filas incompletas

                    const estudiante = {
                        nombre: inputs[0].value.trim(),
                        trabajoClase: parseFloat(inputs[1].value) || 0,
                        lecciones: parseFloat(inputs[2].value) || 0,
                        exposiciones: parseFloat(inputs[3].value) || 0,
                        evaluacionFormativa: parseFloat(inputs[4].value) || 0,
                        evaluacionSumativa: parseFloat(inputs[5].value) || 0,
                        promedio70: parseFloat(inputs[6].value) || 0,
                        evaluacionTrimestral: parseFloat(inputs[7].value) || 0,
                        promedioFinal: parseFloat(inputs[8].value) || 0
                    };
                    datosGuardados.calificaciones[`trimestre${i}`].push(estudiante);
                });
            }

            // Mostrar indicador de guardado
            const indicator = document.getElementById('savedIndicator');
            if (indicator) {
                indicator.classList.add('show');
                setTimeout(() => {
                    indicator.classList.remove('show');
                }, 3000);
            }

            console.log('Datos guardados:', datosGuardados);
        }

        // Funci√≥n para actualizar informaci√≥n del docente en la secci√≥n de calificaciones
        function actualizarInfoDocente() {
            const institucion = document.getElementById('nombre')?.value || '....';
            const docente = document.getElementById('nombresDocente')?.value || '....';
            const asignatura = document.getElementById('asignatura')?.value || '.....';
            const grado = document.getElementById('grado')?.value || '.....';
            const paralelos = Array.from(document.getElementById('paralelos').selectedOptions).map(opt => opt.value).join(', ') || '.....';
            const anioLectivo = new Date().getFullYear();

            document.getElementById('institucionInfo').textContent = institucion;
            document.getElementById('docenteInfo').textContent = docente;
            document.getElementById('asignaturaInfo').textContent = asignatura;
            document.getElementById('gradoInfo').textContent = grado;
            document.getElementById('paralelosInfo').textContent = paralelos;
            document.getElementById('anioLectivoInfo').textContent = anioLectivo;
        }

        // Funci√≥n para agregar estudiante
        function agregarEstudiante(trimestre) {
            const tbody = document.querySelector(`#tablaEstudiantes${trimestre} tbody`);
            const fila = document.createElement("tr");
            
            fila.style.animation = "fadeIn 0.5s ease";

            fila.innerHTML = `
                <td><input type='text' placeholder='Apellidos y nombres completos' style='width: 100%; min-width: 200px;'></td>
                <td><input type='number' class='grade-input' min='0' max='10' step='0.01' onchange='calcularPromedio70(this, ${trimestre})' placeholder='0.00' /></td>
                <td><input type='number' class='grade-input' min='0' max='10' step='0.01' onchange='calcularPromedio70(this, ${trimestre})' placeholder='0.00' /></td>
                <td><input type='number' class='grade-input' min='0' max='10' step='0.01' onchange='calcularPromedio70(this, ${trimestre})' placeholder='0.00' /></td>
                <td><input type='number' class='grade-input' min='0' max='10' step='0.01' onchange='calcularPromedio70(this, ${trimestre})' placeholder='0.00' /></td>
                <td><input type='number' class='grade-input' min='0' max='10' step='0.01' onchange='calcularPromedio70(this, ${trimestre})' placeholder='0.00' /></td>
                <td><input type='number' class='promedio70' readonly style='background: #e3f2fd; font-weight: bold; color: #0d47a1;'></td>
                <td><input type='number' class='eva-trimestral' min='0' max='10' step='0.01' onchange='calcularPromedioFinal(this, ${trimestre})' placeholder='0.00' /></td>
                <td><input type='number' class='promedio-final' readonly style='background: #f1f8e9; font-weight: bold; color: #2e7d32;'></td>
                <td><button class='btn-primary' onclick='eliminarFila(this)' style='padding: 8px 16px; font-size: 0.9rem; background: linear-gradient(135deg, #f44336, #e57373);'>Eliminar</button></td>
            `;

            tbody.appendChild(fila);
        }

        // Funci√≥n para eliminar fila de estudiante
        function eliminarFila(boton) {
            const fila = boton.closest("tr");
            if (fila) {
                fila.style.animation = "fadeOut 0.3s ease";
                setTimeout(() => {
                    fila.remove();
                    calcularPromocionFinal();
                }, 300);
            }
        }

        // Funci√≥n para calcular promedio del 70%
        function calcularPromedio70(input, trimestre) {
            const fila = input.closest("tr");
            const inputsNotas = fila.querySelectorAll(".grade-input");
            const promedio70Input = fila.querySelector(".promedio70");
            
            // Pesos seg√∫n lineamientos del Mineduc
            const pesos = [0.20, 0.15, 0.15, 0.20, 0.30];
            let sumaPonderada = 0;
            
            inputsNotas.forEach((input, index) => {
                const val = parseFloat(input.value) || 0;
                sumaPonderada += val * pesos[index];
            });
            
            const promedio70 = sumaPonderada.toFixed(2);
            promedio70Input.value = promedio70;
            
            // Calcular promedio final si ya hay evaluaci√≥n trimestral
            const evaTrimestralInput = fila.querySelector(".eva-trimestral");
            if (evaTrimestralInput.value) {
                calcularPromedioFinal(evaTrimestralInput, trimestre);
            }
        }

        // Funci√≥n para calcular promedio final (70% + 30%)
        function calcularPromedioFinal(input, trimestre) {
            const fila = input.closest("tr");
            const promedio70Input = fila.querySelector(".promedio70");
            const promedioFinalInput = fila.querySelector(".promedio-final");
            
            const promedio70 = parseFloat(promedio70Input.value) || 0;
            const evaTrimestral = parseFloat(input.value) || 0;
            
            const promedioFinal = (promedio70 * 0.7 + evaTrimestral * 0.3).toFixed(2);
            promedioFinalInput.value = promedioFinal;
            
            // Cambiar color seg√∫n el promedio
            if (promedioFinal) {
                const valor = parseFloat(promedioFinal);
                if (valor >= 7) {
                    promedioFinalInput.style.color = '#2e7d32';
                    promedioFinalInput.style.background = '#e8f5e8';
                } else if (valor >= 5) {
                    promedioFinalInput.style.color = '#ef6c00';
                    promedioFinalInput.style.background = '#fff3e0';
                } else {
                    promedioFinalInput.style.color = '#d32f2f';
                    promedioFinalInput.style.background = '#ffebee';
                }
            }
            
            // Actualizar tabla de promoci√≥n final
            calcularPromocionFinal();
        }

        // Funci√≥n para calcular la promoci√≥n final
        function calcularPromocionFinal() {
            const tbody = document.querySelector("#tablaPromocion tbody");
            tbody.innerHTML = "";
            
            // Obtener todos los estudiantes de los tres trimestres
            const estudiantes = {};
            
            for (let i = 1; i <= 3; i++) {
                const filas = document.querySelectorAll(`#tablaEstudiantes${i} tbody tr`);
                
                filas.forEach(fila => {
                    const nombre = fila.querySelector("input[type='text']").value.trim();
                    const promedioFinal = parseFloat(fila.querySelector(".promedio-final").value) || 0;
                    
                    if (nombre) {
                        if (!estudiantes[nombre]) {
                            estudiantes[nombre] = { trimestres: [] };
                        }
                        estudiantes[nombre].trimestres[i-1] = promedioFinal;
                    }
                });
            }
            
            // Llenar la tabla de promoci√≥n final
            for (const nombre in estudiantes) {
                const trimestres = estudiantes[nombre].trimestres;
                const fila = document.createElement("tr");
                
                // Calcular promedio final si hay 3 trimestres
                let promedioFinal = 0;
                let estado = "Incompleto";
                
                if (trimestres.length === 3 && trimestres.every(t => t > 0)) {
                    promedioFinal = (trimestres[0] + trimestres[1] + trimestres[2]) / 3;
                    estado = promedioFinal >= 7 ? "Aprobado" : "Reprobado";
                }
                
                fila.innerHTML = `
                    <td>${nombre || "-"}</td>
                    <td>${trimestres[0]?.toFixed(2) || "-"}</td>
                    <td>${trimestres[1]?.toFixed(2) || "-"}</td>
                    <td>${trimestres[2]?.toFixed(2) || "-"}</td>
                    <td>${promedioFinal.toFixed(2)}</td>
                    <td>${estado}</td>
                `;
                
                tbody.appendChild(fila);
            }
        }

        // Funci√≥n para imprimir calificaciones
        function imprimirCalificaciones() {
            const printContent = document.querySelector(".trimestre-content.active").innerHTML;
            const originalContent = document.body.innerHTML;
            
            document.body.innerHTML = `
                <style>
                    body { font-family: Arial, sans-serif; padding: 20px; }
                    h1 { color: #0d47a1; text-align: center; }
                    table { width: 100%; border-collapse: collapse; margin-top: 20px; }
                    th, td { border: 1px solid #ddd; padding: 8px; text-align: center; }
                    th { background-color: #0d47a1; color: white; }
                    tr:nth-child(even) { background-color: #f2f2f2; }
                    .info-print { margin-bottom: 20px; border: 1px solid #ddd; padding: 15px; }
                    .info-row { display: flex; margin-bottom: 10px; }
                    .info-label { font-weight: bold; width: 200px; }
                    .footer { text-align: right; margin-top: 50px; }
                </style>
                <h1>Registro de Calificaciones</h1>
                
                <div class="info-print">
                    <div class="info-row">
                        <div class="info-label">Instituci√≥n Educativa:</div>
                        <div>${document.getElementById('nombre').value}</div>
                    </div>
                    <div class="info-row">
                        <div class="info-label">Docente:</div>
                        <div>${document.getElementById('nombresDocente').value}</div>
                    </div>
                    <div class="info-row">
                        <div class="info-label">Asignatura:</div>
                        <div>${document.getElementById('asignatura').value}</div>
                    </div>
                    <div class="info-row">
                        <div class="info-label">Grado/Curso:</div>
                        <div>${document.getElementById('grado').value}</div>
                    </div>
                    <div class="info-row">
                        <div class="info-label">Paralelos:</div>
                        <div>${Array.from(document.getElementById('paralelos').selectedOptions).map(opt => opt.value).join(', ')}</div>
                    </div>
                    <div class="info-row">
                        <div class="info-label">A√±o Lectivo:</div>
                        <div>${new Date().getFullYear()}</div>
                    </div>
                </div>
                
                ${printContent}
                
                <div class="footer">
                    <p>________________________________</p>
                    <p>Firma del Docente</p>
                </div>
            `;
            
            window.print();
            document.body.innerHTML = originalContent;
            showTab(4); // Volver a la secci√≥n de calificaciones
        }

        // Agregar algunos estudiantes de ejemplo al cargar
        document.addEventListener('DOMContentLoaded', function() {
            // Agregar 3 estudiantes de ejemplo para cada trimestre
            for (let i = 1; i <= 3; i++) {
                for (let j = 0; j < 3; j++) {
                    agregarEstudiante(i);
                }
            }
            
            // Establecer a√±o lectivo actual
            document.getElementById('anioLectivoInfo').textContent = new Date().getFullYear();
        });

        // A√±adir animaciones CSS adicionales
        const style = document.createElement('style');
        style.textContent = `
            @keyframes fadeIn {
                from { opacity: 0; transform: translateY(20px); }
                to { opacity: 1; transform: translateY(0); }
            }
            
            @keyframes fadeOut {
                from { opacity: 1; transform: translateY(0); }
                to { opacity: 0; transform: translateY(-20px); }
            }
            
            .form-group {
                animation: slideInUp 0.6s ease forwards;
            }
            
            .form-group:nth-child(2) { animation-delay: 0.1s; }
            .form-group:nth-child(3) { animation-delay: 0.2s; }
            .form-group:nth-child(4) { animation-delay: 0.3s; }
            
            @keyframes slideInUp {
                from {
                    opacity: 0;
                    transform: translateY(30px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }
            
            select[multiple] {
                height: auto;
                min-height: 120px;
                padding: 8px;
            }
            
            select[multiple] option {
                padding: 8px;
                margin: 2px 0;
                border-radius: 8px;
            }
            
            select[multiple] option:hover {
                background: #e3f2fd;
            }
            
            select[multiple] option:checked {
                background: #1976d2;
                color: white;
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>
